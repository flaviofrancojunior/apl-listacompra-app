<div class="d-flex flex-align-center mb-6">
    <div class="s1 fg-support03-medium">Operações Realizadas</div>
    <div class="title-divider"></div>
</div>
<div class="d-flex flex-align-center gap-4 mb-4">
    <sfr-input type="data" [label]="true" placeholder="Data Inicial" [invalid]="_form.hasError('FormatoInvalido') || _form.hasError('DataInicialMaiorQueDataFinal')" [control]="_form" controlName="dataInicial"></sfr-input>
    <sfr-input type="data" [label]="true" placeholder="Data Final" [invalid]="_form.hasError('FormatoInvalido') || _form.hasError('DataInicialMaiorQueDataFinal')" [control]="_form" controlName="dataFinal"></sfr-input>
    <button sfr-button-flat--primary size="fit" [disabled]="_form.invalid" (clicarEvento)="pesquisar()">Pesquisar</button>
</div>
<div class="mb-10">
    <div *ngIf="_form.hasError('DataInicialMaiorQueDataFinal')" class="p3 fg-danger-dark">A data inicial deve ser menor que a final</div>
    <div *ngIf="_form.hasError('FormatoInvalido')" class="p3 fg-danger-dark">As datas devem estar no formato dd/mm/aaaa</div>
</div>
<div class="mb-10">
    <sfr-table-filter [config]="_filtrosExibidos" [dadosTabela]="_listaOperacoes"></sfr-table-filter>
</div>

<div class="w-100 pos-relative">
    <sfr-spinner [name]="estado.spinnerId" [text]="estado.spinnerMensagem"></sfr-spinner>
    <mat-table matSort [dataSource]="_listaOperacoes" class="w-100" matSortActive="data" matSortDirection="desc">
        <ng-container matColumnDef="data">
            <mat-header-cell mat-sort-header *matHeaderCellDef sortActionDescription="Ordenar por data">Data</mat-header-cell>
            <mat-cell class="p3" *matCellDef="let element">{{ element.data | date: 'dd/MM/YYYY HH:mm:ss' }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="modulo">
            <mat-header-cell mat-sort-header *matHeaderCellDef sortActionDescription="Ordenar por módulo">Módulo</mat-header-cell>
            <mat-cell class="p3" *matCellDef="let element">{{ element.modulo }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="operacao">
            <mat-header-cell mat-sort-header *matHeaderCellDef sortActionDescription="Ordenar por operação">Operação</mat-header-cell>
            <mat-cell class="p3" *matCellDef="let element">{{ element.operacao }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="usuario">
            <mat-header-cell mat-sort-header *matHeaderCellDef sortActionDescription="Ordenar por nome de usuário">Usuário</mat-header-cell>
            <mat-cell *matCellDef="let element">
                <div class="d-flex flex-column">
                    <div class="p3">{{ element.usuarioNome }}</div>
                    <div class="p5">{{ 'CPF: ' + element.usuarioCPF }}</div>
                </div>
            </mat-cell>
        </ng-container>

        <ng-container matColumnDef="descricao">
            <mat-header-cell mat-sort-header *matHeaderCellDef sortActionDescription="Ordenar por descrição">Descrição</mat-header-cell>
            <mat-cell class="p3" *matCellDef="let element">{{ element.descricao }}</mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="_colunasExibidas"></mat-header-row>
        <mat-row *matRowDef="let row; columns: _colunasExibidas"></mat-row>
        <div *matNoDataRow class="p1 fg-neutral-medium p-4">Sem dados para exibir no momento.</div>
    </mat-table>
    <mat-paginator showFirstLastButtons aria-label="Selecione a quantidade para visualização"></mat-paginator>
</div>
