<div class="d-flex gap-6">
    <div sfr-card class="p-6" style="width: 100%; max-width: 700px">
        <div class="d-flex flex-align-center mb-6">
            <div class="s1 fg-support03-medium">Movimentação</div>
            <div class="title-divider"></div>
        </div>

        <div class="w-100 pos-relative" [formGroup]="_form">
            <sfr-spinner [name]="estado.spinnerId" [text]="estado.spinnerMensagem"></sfr-spinner>
            <div class="mb-4" style="display: grid; grid-template-columns: 1fr 1fr; grid-gap: 16px">
                <div>
                    <div class="s3 fg-neutral-darkest mb-2">Pessoa</div>
                    <sfr-select placeholder="Selecione" [control]="_form" controlName="pessoaId" [options]="_listaPessoas"></sfr-select>
                </div>
            </div>

            <div class="mb-4" style="display: grid; grid-template-columns: 1fr 1fr; grid-gap: 16px">
                <div *ngIf="_form.get('pessoaId')?.value">
                    <div class="s3 fg-neutral-darkest mb-2">Banco</div>
                    <sfr-select placeholder="Selecione" [invalid]="_listaBancos ? _listaBancos.length === 0 : false" invalidText="Não existem bancos cadastrados para a pessoa selecionada." [control]="_form" controlName="bancoId" [options]="_listaBancos"></sfr-select>
                </div>
                <div *ngIf="_form.get('bancoId')?.value">
                    <div class="s3 fg-neutral-darkest mb-2">Agência/Conta</div>
                    <sfr-select placeholder="Selecione" [invalid]="_listaContas ? _listaContas.length === 0 : false" invalidText="Não existem contas cadastradas para o banco selecionado." [control]="_form" controlName="contaId" [options]="_listaContas"></sfr-select>
                </div>
            </div>

            <div class="mb-4" style="display: grid; grid-template-columns: 1fr 1fr; grid-gap: 16px">
                <div>
                    <div class="s3 fg-neutral-darkest mb-2">Data do Movimento</div>
                    <sfr-input type="data" [label]="false" placeholder="" [control]="_form" controlName="data"></sfr-input>
                </div>                
            </div>

            <div class="mb-4" style="display: grid; grid-template-columns: 1fr 1fr; grid-gap: 16px">
                <sfr-input type="moeda" [label]="false" placeholder="Valor" [control]="_form" controlName="valor"></sfr-input>
            </div>

            <div class="mb-4">
                <div class="s3 fg-neutral-darkest mb-2">Conta Crédito</div>
                <sfr-select placeholder="Selecione" [control]="_form" controlName="planoContaCreditoId" [options]="_listaPlanoContas"></sfr-select>
            </div>
            <div class="mb-4">
                <div class="s3 fg-neutral-darkest mb-2">Conta Débito</div>
                <sfr-select placeholder="Selecione" [control]="_form" controlName="planoContaDebitoId" [options]="_listaPlanoContas"></sfr-select>
            </div>

            <div class="mb-4">
                <div class="s3 fg-neutral-darkest mb-2">Lançamento</div>
                <sfr-input type="texto" [label]="false" placeholder="Digite um lançamento" [control]="_form" controlName="descricao"></sfr-input>
            </div>
            <div class="mb-4">
                <div class="s3 fg-neutral-darkest mb-2">Complemento</div>
                <sfr-input type="texto" [label]="false" placeholder="Defina um complemento" [control]="_form" controlName="complemento"></sfr-input>
            </div>
            <div class="d-flex flex-justify-end">
                <button sfr-button-outline--primary size="fit" [disabled]="_form.invalid" (clicarEvento)="cadastrarLancamento()">Cadastrar Lançamento</button>
            </div>
            <div>{{ _form.value | json }}</div>
        </div>
    </div>

    <div sfr-card class="p-6" style="width: 100%; height: fit-content; max-width: 500px">
        <div class="d-flex flex-align-center mb-6">
            <div class="s1 fg-support03-medium">Lançamentos Cadastrados</div>
            <div class="title-divider"></div>
        </div>

        <div class="w-100 pos-relative mb-4">
            <sfr-spinner [name]="estado.spinnerId" [text]="estado.spinnerMensagem"></sfr-spinner>
            <mat-table matSort [dataSource]="_listaMovimentacoes" class="w-100">
                <ng-container matColumnDef="data">
                    <mat-header-cell mat-sort-header *matHeaderCellDef sortActionDescription="Ordenar por data">Data Movimento</mat-header-cell>
                    <mat-cell *matCellDef="let element">{{ element.data | date: 'dd/MM/YYYY' }}</mat-cell>
                </ng-container>

                <ng-container matColumnDef="valor">
                    <mat-header-cell mat-sort-header *matHeaderCellDef sortActionDescription="Ordenar por valor">Valor</mat-header-cell>
                    <mat-cell *matCellDef="let element">{{ element.valor | currency }}</mat-cell>
                </ng-container>

                <ng-container matColumnDef="acao-1">
                    <mat-header-cell *matHeaderCellDef></mat-header-cell>
                    <mat-cell *matCellDef="let element; let i = index">
                        <button sfr-button-flat--transparent--rounded class="fg-inherit bg-inherit-hover" matTooltip="Remover" matTooltipPosition="above" (clicarEvento)="removerMovimentacao(element.id)">
                            <sfr-icon icon="delete" [iconClass]="['fg-inherit', 's2']"></sfr-icon>
                        </button>
                    </mat-cell>
                </ng-container>

                <mat-header-row *matHeaderRowDef="_colunasExibidas"></mat-header-row>
                <mat-row *matRowDef="let row; columns: _colunasExibidas"></mat-row>
                <div *matNoDataRow class="p1 fg-neutral-medium p-4">Não foram adicionados novos lançamentos ainda.</div>
            </mat-table>
            <sfr-table-paginator [pageSize]="20" [dadosTabela]="_listaMovimentacoes"></sfr-table-paginator>
        </div>
        <div class="d-flex flex-justify-end">
            <button sfr-button-flat--primary size="fit" (clicarEvento)="navegarParaMovimentacoes()">Finalizar Lançamentos</button>
        </div>
    </div>
</div>
